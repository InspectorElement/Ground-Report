<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANDo514PuqSKpPQWKGg2axZ8AWt7rOG_w&libraries=places"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <title>Medical Assistance</title>
</head>
<body>
<button id="find">Find Medical</button>
<div id="map"></div>
<script>
$("#find").click(function(){
  var map;
  var service;
  var infowindow;
  var markers = [];
  var mapPlace;
  var content;
  function initialize() {
    var whereIam = new google.maps.LatLng(latitude, longitude);
    mapPlace = document.getElementById("map");
    map = new google.maps.Map(mapPlace, {
        center: whereIam,
        zoom: 15
      });
    var request = {
      location: whereIam,
      radius: '10000',
      keyword: ['emergency', 'urgent'],
      type: ['hospital']
    };
    service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);
  }
  function createMarker(object) {
    var marker = new google.maps.Marker({
      map: map,
      position: object.geometry.location,
      title: object.name,
    })
    console.log(object);
    content = '<div id="content">' + '<div id="siteNotice">' + '</div>'+ '<h1 id="firstHeading" class="firstHeading">' + object.name + '</h1>'+ '<div id="bodyContent">' + '<p><b>' + object.name + '</b>, is located at ' + object.vicinity + '.</p>'+ '</div>'+ '</div>';
    var infowindow = new google.maps.InfoWindow({
      content: content
    })
    marker.addListener('click', function() {
      infowindow.open(map, marker);
    });
  }
  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        var place = results[i];
        createMarker(results[i]);
      }
    }
  }
  initialize();
});
</script>
</body>
</html>
