<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>GroundWatch</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cloudboost.io/js-sdk/cloudboost.js"></script>
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="sweetalert-master/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="sweetalert-master/dist/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <script src="fontawesome-markers.min.js"></script>
  </head>
  <body>
  <center>
    <div class="content">
  <image id="topLogo" src="https://raw.githubusercontent.com/InspectorElement/GroundWatch/master/logo.png" alt="logo"></image>
  <p><strong><strong>Anonymously report violence at protests.</strong></strong></p>
  <form id="select">
    <section id="first" class="section">
      <div class="container">
      <div class="container">
      <input type="radio" name="type" value="fa fa-eye" id="tear"><label for="tear"><span class="radio">Tear Gas ( <i class="fa fa-eye" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container">
      <input type="radio" name="type" value="fa fa-dot-circle-o" id="rubber"><label for="rubber"><span class="radio">Rubber Bullets ( <i class="fa fa-dot-circle-o" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container">
      <input type="radio" name="type" value="fa fa-tint" id="water"><label for="water"><span class="radio">Water Cannons ( <i class="fa fa-tint" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container">
      <input type="radio" name="type" value="fa fa-crosshairs" id="gun"><label for="gun"><span class="radio">Guns ( <i class="fa fa-crosshairs" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container">
      <input type="radio" name="type" value="fa fa-bolt" id="flash"><label for="flash"><span class="radio">Stun Grenades ( <i class="fa fa-bolt" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container" id="medicColor">
      <input type="radio" name="type" value="fa fa-plus-square" id="medic"><label for="medic"><span class="radio">Medic Needed ( <i class="fa fa-plus-square" aria-hidden="true"></i> )</span></label><br>
      </div>
      <div class="container" id="testColor">
      <input type="radio" name="type" value="fa fa-flag" id="flag"><label for="flag"><span class="radio">Test ( <i class="fa fa-flag" aria-hidden="true"></i> )</span></label><br>
      </div>
    </section>
  </form><br>
   <button id="submit" onclick="geoFindMe()">Submit</button><br><br>
  <div id="map"></div><br><br>
</div>
  <footer class="footer"><p><a href="https://github.com/InspectorElement/GroundWatch" target="_blank">GitHub</a> | <a href="https://github.com/InspectorElement/GroundWatch/blob/master/README.md" target="_blank">FAQ</a> |
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</footer>
  </body>
  <script>
  var latitude;
  var longitude;
  var incidents = [];
  CB.CloudApp.init('veudsushakhr', 'a4483f55-e614-44cb-a5ee-f7f62a43d39e');


  var date = Date();
  date = date.slice(4, -24);
  var year;
  var month;
  var day;
  var formatted = year + "/" + month + "/" + day;
  if (date.charAt(0) == "O") {
    month = "10";
    if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
    formatted = formatted = year + "/" + month + "/" + day;
    console.log(formatted);
  } else if (date.charAt(0) == "F") {
    month = "02";
    if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
    formatted = formatted = year + "/" + month + "/" + day;
    console.log(formatted);
  } else if (date.charAt(0) == "N") {
    month = "11";
    if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
    formatted = formatted = year + "/" + month + "/" + day;
    console.log(formatted);
  } else if (date.charAt(0) == "D") {
    month = "12";
    if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
    formatted = formatted = year + "/" + month + "/" + day;
    console.log(formatted);
  }  else if (date.charAt(0) == "S") {
    month = "09";
    if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
    else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
    formatted = formatted = year + "/" + month + "/" + day;
    console.log(formatted);
  } else if (date.charAt(0) == "M") {
    if (date.charAt(2) == "R") {
      month = "03";
      if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
      formatted = formatted = year + "/" + month + "/" + day;
      console.log(formatted);
    } else {
      month = "05";
      if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
      formatted = formatted = year + "/" + month + "/" + day;
      console.log(formatted);
    }
  } else if (date.charAt(0) == "A") {
    if (date.charAt(2) == "G") {
      month = "08";
      if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
      formatted = formatted = year + "/" + month + "/" + day;
      console.log(formatted);
    } else {
      month = "04";
      if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
      else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
      formatted = formatted = year + "/" + month + "/" + day;
      console.log(formatted);
    }
  } else {
      if (date.charAt(1) == "A") {
        month = "01";
        if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
        else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
        else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
        else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
        else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
        else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
        formatted = formatted = year + "/" + month + "/" + day;
        console.log(formatted);
      } else {
        if (date.charAt(2) == "L"){
          month = "07";
          if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
          formatted = formatted = year + "/" + month + "/" + day;
          console.log(formatted);
        } else {
          month = "06";
          if (date.substr(4,2) == "01") {day = "01";} else if (date.substr(4,2) == "02") {day = "02"; year = date.substr(7,7);} else if (date.substr(4,2) == "03") {day = "03"; year = date.substr(7,7);} else if (date.substr(4,2) == "04") {day = "04"; year = date.substr(7,7);} else if (date.substr(4,2) == "05") {day = "05"; year = date.substr(7,7);} else if (date.substr(4,2) == "06") {day = "06"; year = date.substr(7,7);} else if (date.substr(4,2) == "07") {day = "07"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "08") {day = "08"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "09") {day = "09"; year = date.substr(7,7);} else if (date.substr(4,2) == "10") {day = "10"; year = date.substr(7,7);} else if (date.substr(4,2) == "11") {day = "11"; year = date.substr(7,7);} else if (date.substr(4,2) == "12") {day = "12"; year = date.substr(7,7);} else if (date.substr(4,2) == "13") {day = "13"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "14") {day = "14"; year = date.substr(7,7);} else if (date.substr(4,2) == "15") {day = "15"; year = date.substr(7,7);} else if (date.substr(4,2) == "16") {day = "16"; year = date.substr(7,7);} else if (date.substr(4,2) == "17") {day = "17"; year = date.substr(7,7);} else if (date.substr(4,2) == "18") {day = "18"; year = date.substr(7,7);} else if (date.substr(4,2) == "19") {day = "19"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "20") {day = "20"; year = date.substr(7,7);} else if (date.substr(4,2) == "21") {day = "21"; year = date.substr(7,7);} else if (date.substr(4,2) == "22") {day = "22"; year = date.substr(7,7);} else if (date.substr(4,2) == "23") {day = "23"; year = date.substr(7,7);} else if (date.substr(4,2) == "24") {day = "24"; year = date.substr(7,7);} else if (date.substr(4,2) == "25") {day = "25"; year = date.substr(7,7);}
          else if (date.substr(4,2) == "26") {day = "26"; year = date.substr(7,7);} else if (date.substr(4,2) == "27") {day = "27"; year = date.substr(7,7);} else if (date.substr(4,2) == "28") {day = "28"; year = date.substr(7,7);} else if (date.substr(4,2) == "29") {day = "29"; year = date.substr(7,7);} else if (date.substr(4,2) == "30") {day = "30"; year = date.substr(7,7);} else {day = "31"; year = date.substr(7,7);}
          formatted = formatted = year + "/" + month + "/" + day;
          console.log(formatted);
        }
      }
  }

  function initMap() {
    var query = new CB.CloudQuery("report");
    query.setLimit(10000);
    query.greaterThan("createdAt", formatted);
    query.find({
      success: function(list) {
        for (var i = 0; i < list.length; i++) {
          var lat = list[i].document.latitude;
          var lon = list[i].document.longitude;
          var latlong = {
            "lat": lat,
            "lng": lon
          };
          incidents.push(latlong);
          var mapPlace = document.getElementById("map");
          var map = new google.maps.Map(mapPlace, {
            zoom: 4,
            center: {lat: 40.7128, lng: -74.0059},
            gestureHandling: 'auto',
            styles: [
              {
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#f5f5f5"
                  }
                ]
              },
              {
                "elementType": "labels.icon",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#616161"
                  }
                ]
              },
              {
                "elementType": "labels.text.stroke",
                "stylers": [
                  {
                    "color": "#f5f5f5"
                  }
                ]
              },
              {
                "featureType": "administrative.land_parcel",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#bdbdbd"
                  }
                ]
              },
              {
                "featureType": "poi",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#eeeeee"
                  }
                ]
              },
              {
                "featureType": "poi",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#757575"
                  }
                ]
              },
              {
                "featureType": "poi.park",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#e5e5e5"
                  }
                ]
              },
              {
                "featureType": "poi.park",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              },
              {
                "featureType": "road",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#ffffff"
                  }
                ]
              },
              {
                "featureType": "road.arterial",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#757575"
                  }
                ]
              },
              {
                "featureType": "road.highway",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#dadada"
                  }
                ]
              },
              {
                "featureType": "road.highway",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#616161"
                  }
                ]
              },
              {
                "featureType": "road.local",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              },
              {
                "featureType": "transit.line",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#e5e5e5"
                  }
                ]
              },
              {
                "featureType": "transit.station",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#eeeeee"
                  }
                ]
              },
              {
                "featureType": "water",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#c9c9c9"
                  }
                ]
              },
              {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              }
            ]
          });
          var markers = incidents.map(function(location, i) {
            var type = list[i].document.type;
            if (type == "fa fa-eye") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.EYE,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#383838',
                  strokeOpacity: 1,
                  fillColor: '#383838',
                  fillOpacity: 1
                },
              });
            }
            else if (type == "fa fa-dot-circle-o") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.DOT_CIRCLE_O,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#383838',
                  strokeOpacity: 1,
                  fillColor: '#383838',
                  fillOpacity: 1
                },
              });
            }
            else if (type == "fa fa-tint") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.TINT,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#383838',
                  strokeOpacity: 1,
                  fillColor: '#383838',
                  fillOpacity: 1
                },
              });
            }
            else if (type == "fa fa-crosshairs") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.CROSSHAIRS,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#383838',
                  strokeOpacity: 1,
                  fillColor: '#383838',
                  fillOpacity: 1
                },
              });
            }
            else if (type == "fa fa-bolt") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.FLASH,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#383838',
                  strokeOpacity: 1,
                  fillColor: '#383838',
                  fillOpacity: 1
                },
              });
            }
            else if (type == "fa fa-flag") {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.FLAG,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#0059b3',
                  strokeOpacity: 1,
                  fillColor: '#0059b3',
                  fillOpacity: 1
                },
              });
            }
            else {
              return new google.maps.Marker({
                position: location,
                icon: {
                  path: fontawesome.markers.PLUS_SQUARE,
                  scale: 0.5,
                  strokeWeight: 1,
                  strokeColor: '#ee4b28',
                  strokeOpacity: 1,
                  fillColor: '#ee4b28',
                  fillOpacity: 1
                },
              });
            }
          });
          var markerCluster = new MarkerClusterer(map, markers, {
            imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
            });
        }
      },
      error: function(err) {
        swal({
          title:"Oops!",
          text:"It seems that you are not connected to the internet! Please try again.",
          type:"error",
          showCancelButton: false,
          confirmButtonColor: "#ee4b28",
          confirmButtonText: "Okay!",
          closeOnConfirm: true,
        });
      }
    })
  }
  function geoFindMe() {
    var output = document.getElementById("out");
    if (!navigator.geolocation){
      console.log("Geolocation is not supported by your browser.");
      return;
    }
    function success(position) {
      latitude  = position.coords.latitude;
      longitude = position.coords.longitude;
        if ($("#select").val() == "null") {
          swal({
            title:"Oops!",
            text:"Please select a valid option.",
            type:"error",
            showCancelButton: false,
            confirmButtonColor: "#ee4b28",
            confirmButtonText: "Okay!",
            closeOnConfirm: true,
          });
        }
        else {
          swal({
            title:"Thank you!",
            text:"Your report has been received.",
            type:"success",
            showCancelButton: false,
            confirmButtonColor: "#ee4b28",
            confirmButtonText: "Okay!",
            closeOnConfirm: true,
          });
          var obj = new CB.CloudObject("report");
          obj.set("type", document.querySelector('[name="type"]:checked').value);
          obj.set("latitude", latitude);
          obj.set("longitude", longitude);
          console.log("in setter.");
          obj.save({
            success: function(obj) {
               $("#find").show();
            },
            error: function(err) {
              swal({
                title:"Oops!",
                text:"It seems that you are not connected to the internet! Please try again.",
                type:"error",
                showCancelButton: false,
                confirmButtonColor: "#ee4b28",
                confirmButtonText: "Okay!",
                closeOnConfirm: true,
              });
            }
          });
        }
      }
      function error() {
        console.log("Unable to retrieve your location");
      }
      navigator.geolocation.getCurrentPosition(success, error);
    };
  </script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFXkKVsEXyQxwN0ORuHODENd7l3SZSiXc&callback=initMap"></script>
</html>
